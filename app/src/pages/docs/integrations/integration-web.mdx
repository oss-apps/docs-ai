import { Tabs } from 'nextra/components'
import { Callout } from 'nextra/components'
import { Steps } from 'nextra/components'



# Add AI Chatbot to your website

## Chatbot v2 
We have made changes to the chatbot that lets you configre `Data hub` and `Contact us` sections. You can use the v2 currently by adding an attribute **`version-number="2"`** in the `<script>`

```html /version-number/ copy
<script src="https://docsai.app/embed.min.js" version-number="2" project-id="<your_project_id>"  async></script>
```


## Custom Coded Websites

<Callout type="info">
  You can get the **`project-id`** from settings page
</Callout>

<Tabs items={['HTML', 'Angular', 'React', 'NextJs']} >

  <Tabs.Tab>
  <Steps>
  ### Embed a chatbot in your website 

    - Open your website's **`index.html`** file in a text editor.
    - Paste the script just before the **`</head>`** tag.
    
    ```html copy
    <script src="https://docsai.app/embed.min.js" version-number="2" project-id="<your_project_id>" async></script>
    ```
    - Replace the **`<your_project_id>`** placeholder with your own chatbot's project ID.
    - Your chatbot will be embedded in your website. Visitors to your website will be able to click on the chatbot icon to start a conversation.



  ### Identify users (Optional)  


  <Callout type="warning">
    The values should be set in the `window` object whenever the page loads.
  </Callout>
  
  ```html copy
  <script>
    window.DOCS_AI = {
      userId: "u_id_1234xyt81qlgs", 
      // userId can also be email or your system identifier
      additionalFields: {
        userEmail: "shriharipapa@gmail.com",
        name: "Shrihari Mohan",
        userId: "clfp289qe0000mc0umct1zxeq",
        avatarUrl : "https://lh3.googleusercontent.com/a/AGNmyxZogCHpz"
      }
  }
  </script>
  ```

- Set the **`DOCS_AI`** object to the **`window`** so that it is accessible to the chatbot whenever the user clicks the chatbot icon. 
- `DOCS_AI` object can only have 2 fields `userId` and `additionalFields`.
- The script is customizable and can be adapted to your specific needs.


</Steps>
  </Tabs.Tab>
  
  <Tabs.Tab>
  <Steps>
  ### Embed a chatbot in your website 
   To embed a chatbot in your **Angular** website

    - Open your **`Angular project`** → **`src`** → **`index.html`**.
    - Paste the script just before the **`</head>`** tag.

    ```html copy
    <script src="https://docsai.app/embed.min.js" project-id="<your_project_id>" version-number="2" async></script>
    ```

    - Replace the **`<your_project_id>`** placeholder with your own chatbot's project ID.
    - Your chatbot will be embedded in your website. Visitors to your website will be able to click on the chatbot icon to start a conversation.

  ### Identify users (Optional) 

  <Callout type="warning">
  The values should be set in the `window` object whenever the page loads.
  </Callout>


  ```ts 
  import { Component, OnInit } from '@angular/core';

  type TDOCS_AI = {
    userId: string,
    additionalFields: { [key: string]: unknown; } | undefined 
  }

  export interface CustomWindow extends Window {
    DOCS_AI: TDOCS_AI;
  }

  declare let window: CustomWindow;

  @Component({
    selector: 'app-root',
    templateUrl: './app.component.html',
    styleUrls: ['./app.component.css']
  })

  export class AppComponent implements OnInit {

    constructor() { }

    ngOnInit() {
      window.DOCS_AI = {
        userId: "u_id_1234xyt81qlgs",
        // userId can also be email or your system identifier
        additionalFields: {
          userEmail: "shriharipapa@gmail.com",
          name: "Shrihari Mohan",
          userId: "clfp289qe0000mc0umct1zxeq",
          avatarUrl : "https://lh3.googleusercontent.com/a/AGNmyxZogCHpz"
        }
      }
    }
  }
  ```
  - Set the **`DOCS_AI`** object to the **`window`** so that it is accessible to the chatbot whenever the user clicks the chatbot icon. 
  - `DOCS_AI` object can only have 2 fields `userId` and `additionalFields`.
  - The script is customizable and can be adapted to your specific needs.
  - There are several methods to set values in window object [see here](https://stackoverflow.com/q/12709074/8514864)

  </Steps>

  </Tabs.Tab>

  <Tabs.Tab>
    <Steps>
    ### Embed a chatbot in your website
     There are so many ways to embed a chatbot in your **React** website. We're going to use **`react-helmet`** in this sample.
     ```bash copy
     npm i react-helmet
      ```

    When using TypeScript, install type definitions.

      ```bash copy
      npm i --save-dev @types/react-helmet 
      ```      

    In your `app.jsx` or `app.tsx` file 

    ``` js copy
    import { Helmet } from "react-helmet"

    function App() {
      return (
        <>
          <Helmet>
            <script src="https://docsai.app/embed.min.js" project-id="<your_project_id>" version-number="2" async>
            </script>
          </Helmet>
        </>
        )
    }  
    ```     
    React offers a variety of ways to add `<script>` tags to your website. [See alternate methods here.](https://dev.to/collegewap/how-to-add-script-tag-to-reactjsx-2888)

    ### Identify users (Optional)
    <Callout type="warning">
      The values should be set in the `window` object whenever the page loads.
    </Callout>

    ```js copy
    import { useEffect } from 'react';

    // Types are not neccessary if using javascript
    declare global {
      interface Window {
        DOCS_AI: TDOCS_AI;
      }
    }

    type TDOCS_AI = {
      userId: string,
      additionalFields: { [key: string]: unknown; } | undefined
    }

    function App() {

    useEffect(() => {
      window.DOCS_AI = {
        userId: "u_id_1234xyt81qlgs",
        // userId can also be email or your system identifier
        additionalFields: {
          userEmail: "shriharipapa@gmail.com",
          name: "Shrihari Mohan",
          userId: "clfp289qe0000mc0umct1zxeq",
          avatarUrl : "https://lh3.googleusercontent.com/a/AGNmyxZogCHpz"
        }
      }
    }, [])

    return (
      <>
        <Helmet>
          <script src="https://docsai.app/embed.min.js" project-id="<your_project_id>" version-number="2" async>
          </script>
        </Helmet>
      </>
      )
    }
  ```
  - Set the **`DOCS_AI`** object to the **`window`** so that it is accessible to the chatbot whenever the user clicks the chatbot icon. 
  - `DOCS_AI` object can only have 2 fields `userId` and `additionalFields`.
  - The script is customizable and can be adapted to your specific needs.

  </Steps>
  </Tabs.Tab>

  <Tabs.Tab>
  <Steps>
    ### Embed a chatbot in your website
      To embed a chatbot in your **Nextjs** website

    - Open your **`NextJs project`** → **`src`** → **`_app.jsx`**.
    - Paste the script just before the **`</Head>`** tag.

    ```html copy
    <script src="https://docsai.app/embed.min.js" project-id="<your_project_id>" version-number="2" async></script>
    ```

    - Replace the **`<your_project_id>`** placeholder with your own chatbot's project ID.
    - Your chatbot will be embedded in your website. Visitors to your website will be able to click on the chatbot icon to start a conversation.

    Learn more about how to use [`<Script>` tags](https://nextjs.org/docs/pages/building-your-application/optimizing/scripts) in nextjs.

    ### Identify users (Optional)
    <Callout type="warning">
      The values should be set in the `window` object whenever the page loads
    </Callout>

    ```js copy
    import { useEffect } from 'react';
    import Head from "next/head";

    // Types are not neccessary if using javascript
    declare global {
      interface Window {
        DOCS_AI: TDOCS_AI;
      }
    }

    type TDOCS_AI = {
      userId: string,
      additionalFields: { [key: string]: unknown; } | undefined
    }

    function App() {

     useEffect(() => {
      window.DOCS_AI = {
        userId: "u_id_1234xyt81qlgs",
        // userId can also be email or your system identifier
        additionalFields: {
          userEmail: "shriharipapa@gmail.com",
          name: "Shrihari Mohan",
          userId: "clfp289qe0000mc0umct1zxeq",
          avatarUrl : "https://lh3.googleusercontent.com/a/AGNmyxZogCHpz"
        }
      }
    }, [])

    return ( 
      <Head> 
        <script src="https://docsai.app/embed.min.js" project-id="<your_project_id>" version-number="2" async>
        </script>
      </Head> 
    )
    }
  ```
  - Set the **`DOCS_AI`** object to the **`window`** so that it is accessible to the chatbot whenever the user clicks the chatbot icon. 
  - `DOCS_AI` object can only have 2 fields `userId` and `additionalFields`.
  - The script is customizable and can be adapted to your specific needs.

</Steps>

</Tabs.Tab>

</Tabs>

Having certain fields in your **`additionalFields`** will help you improve the user interface in your chat history. 
Use **`name`** , **`avatarUrl`** and **`userEmail`** to get a contact card at the top and all the fields will appear in the table
![Identifying users](/docs/identify-user-dialog.webp)

<Callout >
  If you are having problems with chatbot, please see the **[troubleshooting guide](#troubleshooting)**.
</Callout>



## Wordpress

Using a wordpress plugin we can easily embed a chat bot in your wordpress site. Learn how to add [JS Plugin](https://wordpress.com/go/website-building/how-to-properly-add-javascript-to-wordpress-3-top-methods/).
In this we're going to use [WPCode](https://wordpress.com/plugins/insert-headers-and-footers) plugin.

- Install and activate the free plugin on your site.
- Go to Code Snippets → + Add Snippet in your WP Admin.
- Hover over the option to Add Your Custom Code (New Snippet) and choose Use Snippet.
- Add a title to help you remember what the snippet does. You’re the only person who will see this.
-  Set the Code Type equal to JavaScript Snippet.
- Add the below code for your snippet to the Code Preview. The plugin will automatically add the opening and closing `<script>` tags so you don’t need to include that portion of the JavaScript snippet.
- The most important options here are the Insertion settings. You can add your snippet sitewide to the header, footer, or body. For important snippets, you should choose the header, though the footer is slightly better from a performance perspective.

For [visual references](https://wordpress.com/go/website-building/how-to-properly-add-javascript-to-wordpress-3-top-methods/)  use docs from official website.

```html copy
<script src="https://docsai.app/embed.min.js" project-id="<your_project_id>" version-number="2" async></script>
```

## Integrators
We support other website builders, such as **Webflow**, **Wix**, and **Squarespace**, which allow you to insert the `<script>` tag.

## Troubleshooting 

**The chatbot widget is not visible on your website.**

If you are seeing this , it means that the `<script>` tag is not loading on your website. Please check the HTML source code to ensure that the tag is correct.

**The chatbot widget is loading, but the project it is trying to connect to is not found.**

This means the `project-id` is incorrect. Make sure you get the valid `project-id` from your settings.


**Identifying users not working , there is no users in the chat history**

To identify the problem, you can inspect the browser log. To do this, open the developer tools in your browser and navigate to the console tab. 
Once the chatbot icon appears, you should see three logs in the console window.

```
🤖 Intializing your chat bot
🤖 Docsai chat loaded
🤖 Docsai chat body loaded 
```

After clicking on the chat icon, you should see an additional log appear in the console window.

This log should contain all of the data that you are trying to send to DocsAI.
If the log does not contain any values, then the **`DOCS_AI`** object in the window object is not set properly.

```
🤖 Sending to docsai  

{
    "userId": "u_id_1234xyt81qlgs",
    "additionalFields": {
        "userEmail": "shriharipapa@gmail.com",
        "name": "Shrihari Mohan",
        "userId": "clfp289qe0000mc0umct1zxeq",
        "avatarUrl" : "https://lh3.googleusercontent.com/a/AGNmyxZogCHpz"
    }
}
```

Make sure the data is received at the chat also. You can verify this by changing the top console window to `chat-iframe` .

![troubleshoot](/docs/troubleshoot-1.webp)

```
🤖 Received identification 
{
    "userDetails": {
        "userId": "u_id_1234xyt81qlgs",
        "additionalFields": {
          "userEmail": "shriharipapa@gmail.com",
          "name": "Shrihari Mohan",
          "userId": "clfp289qe0000mc0umct1zxeq",
          "avatarUrl" : "https://lh3.googleusercontent.com/a/AGNmyxZogCHpz"
        }
    },
    "source": "docsai"
}
```

This `🤖 Sending to docsai ` and `🤖 Received identification`  log should apperar whenever the chat bot opens.

If all this is happening to you and you still not see users in your chat history contact hey@docsai.app







